/* ANALISI STATISTICHE - STILI SPECIFICI */

.analisi-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    padding-bottom: 15px;
    border-bottom: 2px solid #444;
}

.analisi-header h1 {
    color: #FFD700;
    margin: 0;
}

.filtri-periodo {
    display: flex;
    gap: 15px;
    align-items: center;
}

.analisi-panel {
    margin-bottom: 25px;
    background: #2a2a2a;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
}

.analisi-panel h2 {
    color: #FFD700;
    border-bottom: 1px solid #444;
    padding-bottom: 10px;
    margin-bottom: 20px;
}

/* CLASSIFICHE */
.classifica-container {
    display: grid;
    /* Rimuovi o imposta a 0 il gap */
    gap: 0; 
}

.cliente-item, .servizio-item {
    display: flex;
    justify-content: space-between;
    align-items: center;

    /* ðŸ›‘ CAMBIAMENTO CHIAVE: Riduzione drastica del padding verticale (da 15px a 8px) */
    padding: 8px 15px; 
    
    /* ðŸ›‘ RIMOZIONE: Elimina lo sfondo scuro (background: #333; era il problema dello spazio) */
    background: transparent; 
    
    /* ðŸ›‘ RIMOZIONE: Elimina l'angolo arrotondato */
    border-radius: 0; 

    /* AGGIUNTA: Usa un bordo inferiore per separare le righe */
    border-bottom: 1px solid #444; 
    
    /* Mantieni il bordo laterale */
    border-left: 4px solid #FFD700;
}

/* Rimuovi il bordo sotto l'ultimo elemento */
.classifica-container .cliente-item:last-child,
.classifica-container .servizio-item:last-child {
    border-bottom: none;
}

.cliente-info, .servizio-info {
    flex: 1;
}

.cliente-nome {
    font-weight: bold;
    color: #FFD700;
    font-size: 1.1em;
}

.cliente-dettagli, .servizio-dettagli {
    font-size: 0.9em;
    color: #ccc;
    margin-top: 5px;
}

.cliente-statistiche, .servizio-statistiche {
    text-align: right;
}

.visite-count, .richieste-count {
    font-size: 1.3em;
    font-weight: bold;
    color: #4CAF50;
}

.frequenza-media {
    font-size: 0.9em;
    color: #888;
}

/* MAPPA FEDELTA */
.mappa-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-top: 15px;
}

.categoria-fidelita {
    padding: 15px;
    border-radius: 8px;
    text-align: center;
    background: #333;
}

.categoria-vip { border-left: 4px solid #4CAF50; }
.categoria-regolari { border-left: 4px solid #FFC107; }
.categoria-occasionali { border-left: 4px solid #FF9800; }
.categoria-rischio { border-left: 4px solid #F44336; }

.categoria-titolo {
    font-weight: bold;
    margin-bottom: 5px;
}

.categoria-count {
    font-size: 1.5em;
    font-weight: bold;
    color: #FFD700;
}

.categoria-intervallo {
    font-size: 0.8em;
    color: #ccc;
}

/* TREND MENSILE */
.trend-container {
    margin-top: 15px;
    /* ðŸ›‘ IMPORTANTE: Per centrare il grafico se Ã¨ piÃ¹ piccolo del suo pannello contenitore */
    display: flex; 
    justify-content: center;
    align-items: center;
}

/* ðŸ›‘ NUOVO STILE CRITICO: Limita la dimensione del contenitore CANVAS */
#grafico-trend {
    /* Imposta la dimensione massima desiderata per il grafico (es. 400x400) */
    max-width: 600px;
    max-height: 600px; 
    
    /* Nota: Se non Ã¨ giÃ  un div separato, Chart.js crea il canvas direttamente qui. */
    /* Garantiamo che lo spazio che occupa il canvas sia limitato. */
}

.trend-mese {
    margin-bottom: 10px;
}

.mese-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 5px;
}

.mese-nome {
    font-weight: bold;
    color: #FFD700;
    min-width: 80px;
}

.barra-trend {
    height: 20px;
    background: #333;
    border-radius: 10px;
    overflow: hidden;
    position: relative;
}

.barra-interna {
    height: 100%;
    background: linear-gradient(90deg, #4CAF50, #8BC34A);
    border-radius: 10px;
    transition: width 0.5s ease;
}

/* INSIGHTS */
.insights-panel {
    border-left: 4px solid #2196F3;
}

.insight-item {
    padding: 15px;
    margin-bottom: 10px;
    background: #333;
    border-radius: 8px;
    border-left: 4px solid;
}

.insight-allerta { border-left-color: #F44336; }
.insight-suggerimento { border-left-color: #4CAF50; }
.insight-info { border-left-color: #2196F3; }

.insight-titolo {
    font-weight: bold;
    margin-bottom: 5px;
    color: #FFD700;
}

.insight-descrizione {
    color: #ccc;
    font-size: 0.95em;
}

/* LOADING STATES */
.loading-message {
    text-align: center;
    padding: 40px;
    color: #888;
    font-style: italic;
}

/* RESPONSIVE */
@media (max-width: 768px) {
    .analisi-header {
        flex-direction: column;
        gap: 15px;
        text-align: center;
    }
    
    .filtri-periodo {
        justify-content: center;
    }
    
    .mappa-container {
        grid-template-columns: 1fr;
    }
    
    .cliente-item, .servizio-item {
        flex-direction: column;
        text-align: center;
        gap: 10px;
		    padding: 8px 15px; /* <--- 8px in alto e 8px in basso */
    }
    
    .cliente-statistiche, .servizio-statistiche {
        text-align: center;
    }
}


/* ========================================= */
/* === AFFIANCAMENTO PANNELLI CLASSIFICA === */
/* ========================================= */
.classifiche-affiancate {
    display: flex;     /* 1. Attiva l'affiancamento */
    gap: 20px;         /* 2. Spazio tra i due pannelli */
    margin-bottom: 25px; /* Spazio sotto il contenitore */
}

/* Fa in modo che i due pannelli occupino equamente lo spazio */
.classifiche-affiancate .analisi-panel {
    flex: 1; 
    min-width: 0; /* Importante per la flessibilitÃ  */
}

/* Manteniamo la responsivitÃ  per schermi piccoli */
@media (max-width: 768px) {
    .classifiche-affiancate {
        flex-direction: column; /* Torna in colonna su schermi piccoli */
        gap: 0;
    }
}


/* Stili di base per la Modale */
.modal {
    display: none; /* Nascosta di default */
    position: fixed; /* Rende la modale fissa sullo schermo */
    z-index: 1000; /* Livello alto per coprire tutto */
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto; 
    background-color: rgba(0,0,0,0.8); /* Sfondo nero semi-trasparente */
}

/* Contenuto della Modale */
.modal-content {
    background-color: #2a2a2a;
    margin: 8% auto; /* Centra il box verticalmente e orizzontalmente (con la width) */
    padding: 25px;
    border: 1px solid #444;
    width: 80%; /* Larghezza del box modale */
    max-width: 600px; /* Massima larghezza per schermi grandi */
    border-radius: 12px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    color: #eee;
}

/* Pulsante Chiudi (X) */
.close-btn {
    color: #FFD700;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
}

.close-btn:hover,
.close-btn:focus {
    color: #fff;
    text-decoration: none;
}

/* Stili per la lista dei clienti all'interno della modale */

/* ðŸ›‘ NUOVA REGOLA CHIAVE: Usa Flexbox per allineare orizzontalmente tutti gli elementi */
.cliente-servizio-item {
    display: flex;
    justify-content: space-between; /* Spinge il nome a sinistra e i dettagli a destra */
    align-items: center;
    padding: 8px 0; /* Ridotto per compattare */
    border-bottom: 1px dashed #444;
}

/* Stili per i dettagli */
.dettagli-modale {
    /* Assicurati che non ci siano interruzioni qui */
    white-space: nowrap; 
    font-size: 0.9em;
    color: #ccc;
}

/* Stile del nome (dal passo precedente) */
.nome-cliente-modale {
    color: #FFD700 !important; 
    font-weight: bold; 
    text-decoration: none !important; 
}


/* ======================================================= */
/* Bar Chart uniformi: tutte le barre con stessa altezza */
/* ======================================================= */

/* Per i canvas dei grafici a barre */
#fedeltaChart, #distribuzioneServiziChart {
    /* Altezza fissa dei canvas */
    max-height: 400px;  /* Puoi regolare in base allo spazio disponibile */
}

/* Altezza uniforme delle barre */
#fedeltaChart .chartjs-render-monitor,
#distribuzioneServiziChart .chartjs-render-monitor {
    /* Altezza massima della barra */
    --bar-thickness: 25px; /* Valore consigliato, puoi aumentare/diminuire */
}


/* Pulsante insight */
.btn-insight {
    background-color: #FFD700;
    color: #2a2a2a;
    font-weight: bold;
    padding: 8px 15px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    margin-bottom: 10px;
    transition: transform 0.2s, background-color 0.2s;
}

.btn-insight:hover {
    transform: scale(1.05);
    background-color: #FFC107;
}

/* Messaggio insight dinamico */
#insight-casuale {
    padding: 12px 15px;
    border-left: 4px solid #2196F3;
    background: #333;
    color: #FFD700;
    border-radius: 8px;
    margin-bottom: 15px;
    transition: transform 0.2s;
}


/* ========================= */
/* === INSIGHT ANIMAZIONI === */
/* ========================= */

@keyframes fadeInUp {
  0% {
    opacity: 0;
    transform: translateY(10px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.insight-section {
  margin-top: 25px;
  text-align: center;
}

.insight-container {
  margin-top: 15px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Card base */
.insight-item {
  background: #f9f9f9; /* chiaro e leggibile */
  color: #222; /* testo scuro */
  margin: 8px 0;
  padding: 12px 18px;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  width: 80%;
  max-width: 500px;
  text-align: left;
  font-weight: 500;
  animation: fadeInUp 0.6s ease;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.insight-item:hover {
  transform: translateY(-3px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

/* Stato: crescita, calo o stabile */
.insight-up {
  border-left: 5px solid #4CAF50; /* verde */
}

.insight-down {
  border-left: 5px solid #F44336; /* rosso */
}

.insight-stable {
  border-left: 5px solid #FFC107; /* giallo */
}
/* ===== COLORI E ANIMAZIONI INSIGHT TREND ===== */
.insight-item {
    color: #fff;
    background: #2a2a2a;
    border-radius: 8px;
    margin-bottom: 10px;
    padding: 12px 15px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

/* Hover animato */
.insight-item:hover {
    transform: scale(1.03);
    box-shadow: 0 0 12px rgba(255, 215, 0, 0.3);
}

/* Crescita - Verde */
.insight-up {
    border-left: 5px solid #4CAF50;
    background: linear-gradient(90deg, #1b3b1b, #2a2a2a);
}

/* Calo - Rosso */
.insight-down {
    border-left: 5px solid #F44336;
    background: linear-gradient(90deg, #3b1b1b, #2a2a2a);
}

/* Stabile - Giallo */
.insight-stable {
    border-left: 5px solid #FFD700;
    background: linear-gradient(90deg, #3b3b1b, #2a2a2a);
}

/* Selettore principale e quello in basso */
#tipoGrafico,
#filtro-periodo,
#filtro-periodo-bottom {
    background-color: #FFD700; /* giallo oro */
    color: #000;               /* testo nero leggibile */
    border: 1px solid #B8860B; /* bordo marrone oro scuro */
    padding: 5px 10px;
    border-radius: 5px;
    font-weight: bold;
}

/* Effetto hover */
#tipoGrafico:hover,
#filtro-periodo:hover,
#filtro-periodo-bottom:hover {
    background-color: #FFC700; /* un poâ€™ piÃ¹ chiaro al passaggio del mouse */
    cursor: pointer;
}

.cliente-item {
    background-color: #1e1e1e;
    border-radius: 8px;
    padding: 10px 15px;
    margin-bottom: 8px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.5);
    color: #f0f0f0;
    display: flex;             /* flex per allineare nome e info */
    justify-content: space-between;
    align-items: center;
    transition: transform 0.1s, box-shadow 0.1s;
}

.cliente-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 3px 6px rgba(0,0,0,0.7);
}

.cliente-nome {
    color: #f1c40f;
    font-size: 0.95rem;
    font-weight: 600;
}

.cliente-info {
    text-align: right;
    font-size: 0.85rem;
    color: #ccc;
}

.cliente-visite {
    background-color: #f1c40f;
    color: #1e1e1e;
    padding: 2px 8px;
    border-radius: 12px;
    font-weight: bold;
    font-size: 0.85rem;
    margin-bottom: 4px;
}






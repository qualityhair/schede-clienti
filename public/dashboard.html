<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - Schede Clienti</title>
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/dashboard-layout.css">

<!-- FullCalendar CSS -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css" rel="stylesheet" />

<!-- FullCalendar JS -->
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.js"></script>

<!-- Il tuo script dashboard -->
    <script src="/js/dashboard-app.js"></script>

</head>
<body>

<main class="container dashboard-main">
    <table class="header-table">
    <tr>
        <td class="logo-cell">
            <img src="img/logo1.jpg" alt="Logo Quality Hair" class="page-logo">
        </td>
        <td class="greeting-cell">
            <h2 id="summary-greeting">üëã Caricamento...</h2>
            <div id="summary-aforisma" class="aforisma-widget">
                <p id="aforisma-frase">‚Äú...‚Äù</p>
                <footer id="aforisma-autore"></footer>
            </div>
        </td>
        <td class="weather-cell">
            <div id="summary-weather" class="weather-widget">
                <span id="weather-text">Meteo non disponibile</span>
                <img id="weather-icon" src="" alt="" style="display: none;">
            </div>
        </td>
    </tr>
</table>

	
  
    <!-- ============================================= -->
    <!-- ========= NUOVA GRIGLIA A 3 COLONNE ========= -->
    <!-- ============================================= -->
    <div class="dashboard-layout-grid-3-col">

        <!-- === COLONNA SINISTRA === -->
        <div class="dashboard-column">
            
            <!-- PANNELLO RIEPILOGO MATTUTINO -->
<div class="summary-panel">
    <div class="summary-metrics">
        <div id="widget-sospesi" class="metric-widget clickable">
            <div class="metric-icon">üö®</div>
            <div class="metric-value" id="sospesi-count">...</div>
            <div class="metric-label">Clienti in Sospeso</div>
        </div>
        <div id="widget-buoni" class="metric-widget clickable">
            <div class="metric-icon">üéÅ</div>
            <div class="metric-value" id="buoni-count">...</div>
            <div class="metric-label">Buoni Attivi</div>
        </div>
        <!-- NUOVO WIDGET SCORTE BASSE -->
        <div id="widget-scorte" class="metric-widget clickable">
            <div class="metric-icon">üì¶</div>
            <div class="metric-value" id="scorte-count">0</div>
            <div class="metric-label">Prodotti in Esaurimento</div>
        </div>
    </div>
</div>
				
            <!-- PANNELLO CERCA CLIENTE -->
            <div class="panel dashboard-panel">
            
                <input type="text" id="search-input" placeholder="Nome, Cognome o Soprannome" class="input-field" />
                <button id="search-button" class="btn btn-primary">Cerca cliente</button>
            </div>

            <!-- PANNELLO NUOVO CLIENTE -->
			<!-- NUOVA STRUTTURA COLLASSABILE -->
				<div class="panel dashboard-panel collapsible-panel closed">
				<div class="collapsible-header">
				<h2 class="panel-title">Nuovo Cliente</h2>
				<span class="collapsible-arrow">‚ñº</span>
				</div>
				<div class="collapsible-content">
					<!-- Il form ora √® qui dentro -->
				<input type="text" id="new-client-name" placeholder="Nome" required class="input-field" />
				<input type="text" id="new-client-surname" placeholder="Cognome" required class="input-field" />
				<input type="text" id="new-client-nickname" placeholder="Soprannome (opzionale)" class="input-field" />
				<input type="email" id="new-client-email" placeholder="Email (opzionale)" class="input-field" />
				<input type="tel" id="new-client-phone" placeholder="Telefono (opzionale)" class="input-field" />
				<input type="text" id="new-client-tags" placeholder="Tag (es: VIP, Allergia Tinta)" class="input-field" />
				<button id="add-new-client-button" class="btn btn-primary">Aggiungi Cliente</button>
				</div>
</div>          




        </div>

        <!-- === COLONNA CENTRALE === -->
        <div class="dashboard-column">
		            <button id="apri-mappa-btn" class="btn btn-primary">Quality Live</button>
		
		
            <!-- PANNELLO APPUNTAMENTI DI OGGI -->
			
            <div class="panel dashboard-panel">
                
                <ul class="appointments-list" id="lista-appuntamenti">
                    <li class="appointment-item loading">Caricamento in corso...</li>
                </ul>
            </div>            
 
        </div>

        <!-- === COLONNA DESTRA === -->
        <div class="dashboard-column">
		    <div class="panel dashboard-panel">

				<div class="notepad-container">
				<textarea id="blocco-note-textarea" class="textarea-field" rows="6" placeholder="Blocco note per appunti veloci..."></textarea>
				<small id="blocco-note-status" class="notepad-status"></small>
				</div>
			</div>
			
			
			<!-- PANNELLO CLIENTI DA CONTATTARE (ORA COLLASSABILE) -->
<div class="panel dashboard-panel collapsible-panel closed">
    <div class="collapsible-header">
        <h2 class="panel-title">Clienti in Ritardo</h2>
        <span class="collapsible-arrow">‚ñº</span>
    </div>
    <div class="collapsible-content">
       
        <div id="clienti-a-rischio-container" class="lista-clienti-rischio">
            <p class="loading">Caricamento in corso...</p>
        </div>
    </div>
</div>
			
			
            
            <!-- PANNELLO STRUMENTI E LINK -->
            <div class="panel dashboard-panel collapsible-panel closed">
    <div class="collapsible-header">
        <h2 class="panel-title">Strumenti</h2>
        <span class="collapsible-arrow">‚ñº</span>
    </div>
    <div class="collapsible-content">
        <div class="tools-grid">


            <button onclick="window.open('https://calendar.google.com/calendar/u/0/r/week', '_blank')" class="btn btn-primary">Google Calendar</button>
             <a href="/calendario" class="btn btn-primary">Agenda Settimanale</a>

            <button id="apri-impostazioni-btn" class="btn btn-primary">Impostazioni e Gestione</button>
            <hr class="panel-divider">
            <button id="play-radiofreccia" class="btn-music">üéµ Apri Radiofreccia</button>
            <button id="play-spotify" class="btn-music">üéß Apri Spotify</button>
            <button id="play-player" class="btn-music">üéπ Apri Player Musica</button>
        </div>
    </div>
</div>




    </div>
    <!-- ============================================= -->
	
<!-- MODALE PER LA MAPPA SALONE (CON DIMENSIONI CORRETTE) -->
<div id="mappa-salone-modal" class="dashboard-modal">
    <!-- Applico lo stile al contenitore principale -->
    <div class="dashboard-modal-content large" style="width: 95%; max-width: 1400px; height: 90vh;">
        
        <div class="dashboard-modal-header">
            <h3>Quality Hair Live</h3>
            <button id="close-mappa-btn" class="close-btn">&times;</button>
        </div>

        <!-- Rimuovo lo stile dal corpo e lascio che si adatti -->
        <div class="dashboard-modal-body" style="padding: 0; height: 800px;">
            <iframe id="mappa-iframe" src="about:blank" style="width: 100%; height: 100%; border: none;"></iframe>
        </div>

    </div>
</div>
	
	
	
</main>


<!-- ======================================================= -->
<!-- === NUOVA MODALE "PREPARA APPUNTAMENTO" === -->
<!-- ======================================================= -->
<div id="prepare-appointment-modal" class="modal">
    <div class="modal-content large-modal">
        
        <div class="prep-header">
            <img id="prep-avatar" src="/img/default-avatar.png" alt="Avatar Cliente" class="profile-avatar">
            <div class="prep-header-info">
                <h3 id="prep-client-name">Nome Cliente...</h3>
                <div id="prep-client-tags" class="tags-container"></div>
            </div>
            <button class="modal-button cancel" id="prep-close-btn" style="position: absolute; top: 15px; right: 15px;">&times;</button>
        </div>

        <hr class="panel-divider">

        <div class="prep-grid">
            <!-- Colonna Sinistra: Ultimo Lavoro -->
            <div class="prep-section">
                <h4>Ultimo Lavoro Eseguito</h4>
                <div id="prep-last-photo-container" class="prep-photo-container">
                    <p>Nessuna foto recente trovata.</p>
                </div>

            </div>

            <!-- Colonna Destra: Ultima Analisi -->
			<div id="prep-last-formula">
               <strong>Formula Colore:</strong>
               <p>Nessuna formula registrata.</p>
            </div>
			
            <div class="prep-section">
                <h4>Ultima Analisi Trico</h4>
                <div id="prep-last-analysis">
                    <p>Nessuna analisi trovata.</p>
                </div>
            </div>
        </div>

        <hr class="panel-divider">

        <!-- Azioni Rapide -->
        <div class="prep-actions">
            <a id="prep-full-card-btn" href="#" class="btn btn-primary">Apri Scheda Completa</a>
            <div class="contact-actions">
                <a id="prep-whatsapp-btn" class="contact-btn" title="Invia WhatsApp" style="display: none;">üí¨</a>
                <a id="prep-email-btn" class="contact-btn" title="Invia Email" style="display: none;">üìß</a>
            </div>
        </div>
    </div>
</div>



<!-- Modale Clienti in Sospeso -->
<div id="sospesiModal" class="dashboard-modal">
    <div class="dashboard-modal-content">
        <div class="dashboard-modal-header">
            <h3>Clienti con Pagamenti in Sospeso</h3>
            <button class="close-btn">&times;</button>
        </div>
        <div class="dashboard-modal-body">
            <table class="summary-table">
                <thead>
                    <tr>
                        <th>Cliente</th>
                        <th>Importo Sospeso</th>
                        <th>Azione</th>
                    </tr>
                </thead>
                <tbody id="sospesi-lista">
                    <!-- Il JS popoler√† questa tabella -->
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Modale Buoni Attivi -->
<div id="buoniModal" class="dashboard-modal">
    <div class="dashboard-modal-content">
        <div class="dashboard-modal-header">
            <h3>Buoni Regalo Attivi</h3>
            <button class="close-btn">&times;</button>
        </div>
        <div class="dashboard-modal-body" id="buoni-lista">
            <!-- Il JS popoler√† questa lista -->
        </div>
    </div>
</div>

<!-- ============================================= -->
<!-- === MODALE IMPOSTAZIONI E GESTIONE === -->
<!-- ============================================= -->
<div id="impostazioni-modal" class="dashboard-modal">
    <div class="dashboard-modal-content">
        <div class="dashboard-modal-header">
            <h3>Impostazioni e Gestione</h3>
            <button id="close-impostazioni-btn" class="close-btn">&times;</button>
        </div>
        <div class="dashboard-modal-body">
            <div class="tools-grid" style="text-align: center;">
                <!-- I PULSANTI SPOSTATI SONO ORA QUI -->
				<a href="/lista-clienti.html" class="btn btn-primary">Lista Clienti</a>
				<a href="/catalogo.html" class="btn btn-primary">Catalogo Lavori</a>
                <a href="/prodotti.html" class="btn btn-primary">Gestione Prodotti</a>
                <a href="/listino.html" class="btn btn-primary">Listino Prezzi</a>
				<a href="/analisi-statistiche.html" class="btn btn-primary">üìä Analisi e Statistiche</a>
                <hr class="panel-divider">
                <a href="/logout" class="btn btn-danger">Esci dal Programma</a>
            </div>
        </div>
    </div>
</div>





</body>
</html>


</body>
</html>